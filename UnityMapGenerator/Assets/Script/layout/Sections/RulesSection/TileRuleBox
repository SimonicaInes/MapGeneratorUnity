using UnityEditor;
using UnityEngine;
using UnityEngine.Events;
using UnityEngine.UIElements;
using UnityEditor.UIElements;


public class TileRuleBox : EditorWindow
{
    public int id;
    public VisualElement root;

    public DeleteChildEvent evt;
    public LabelTextBox resourceFolderName;
    public VisualElement columnContainerChoices;

    public LabelCheckboxValue damageField;
    public LabelCheckboxValue speedField;
    public LabelCheckboxValue regenerationField;
    public LabelCheckbox diggingField;

    private float borderWidth = 2f;
    public VisualElement mainContainer;
    public VisualElement firstContainer;
    public VisualElement secondContainer;

    public Button deleteTileRule;

    private Color darkGray = new Color(0.12f, 0.12f, 0.12f);

    public TilePropertyBox(VisualElement root, int id, DeleteChildEvent evt)
    {
        this.id = id;
        this.root = root;
        this.CreateGUI();
        this.evt = evt;
    }

    private void CreateGUI()
    {
        mainContainer = new VisualElement()
        {
            style = 
            {
                flexDirection = FlexDirection.Column,
                borderBottomColor = darkGray,
                borderLeftColor = darkGray,
                borderRightColor = darkGray,
                borderTopColor = darkGray,
                borderBottomWidth = borderWidth,
                borderLeftWidth = borderWidth,
                borderRightWidth = borderWidth,
                borderTopWidth = borderWidth,
                marginBottom = 20,
                paddingBottom = 5,
     
            }
        };

        firstContainer = new VisualElement()
        {
            style = 
            {
                flexDirection = FlexDirection.Row,
                backgroundColor = darkGray,
                justifyContent = Justify.SpaceBetween
                
            }
        };        


        // BUTTON CREATION
        deleteTileRule = new Button()
        {
            style = 
            {
                justifyContent = Justify.FlexEnd,
                backgroundImage = (Texture2D)AssetDatabase.LoadAssetAtPath("Assets/Resources/Icons/cancel.png", typeof(Texture2D)),
                backgroundColor = new Color(0,0,0,0),
                borderBottomWidth = 0,
                borderTopWidth = 0,
                borderRightWidth = 0,
                borderLeftWidth = 0,
                marginBottom = 4,
            }
        };

        deleteTileRule.clickable.clicked += () =>
        {
            evt.Invoke(this.id);


        };


        //END BUTTON CREATION
        


        this.root.Add(mainContainer);
    }
    public VisualElement GetVisualElement()
    {
        return this.mainContainer;
        
    }

}
